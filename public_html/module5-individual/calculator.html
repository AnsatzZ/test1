<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Calculator</title>
    <link rel="stylesheet" type="text/css" href="main_stylesheet.css"/>
  </head>
  <body>

<div class = "calculator">
    <div class ="input">
        <label for="var1input">First Number:</label>
        <input type="number" step ="any"  name="varfield" id="var1input" />

        <label for="var2input">Second Number:</label>
        <input type="number" step ="any" name="varfield" id="var2input"/>
    </div>
    <div class ="operations">
        <label for="add"><input type="radio" id="add" name="operation" value="add"  /> Add</label> &nbsp;
        <label for="subtract"><input type="radio" id="subtract" name="operation" value="subtract" /> Subtract</label>
        <label for="multiply"><input type="radio" id="multiply" name="operation" value="multiply"  /> Multiply</label> &nbsp;
        <label for="divide"><input type="radio" id="divide" name="operation" value="divide"  /> Divide</label>
    </div>

   

    Result:  
			

    <div class ="output">
            <output id="result"></output> 
    </div>
        

 
</div>
<script>
        function add(numb1, numb2){
            return numb1 + numb2;
        }
        function subtract(numb1, numb2){
            return numb1 - numb2;
    
        }
        function multiply(numb1, numb2){
            return numb1 * numb2;
    
        }
        function divide(numb1,numb2){
            if(numb2 ==0){
                alert("The result would be undefined");
            }
            else{
                return numb1/numb2;
            }
        }

        //determine which operation is selected
        function determineOperation(){
        
            var operation_pointers = document.getElementsByName("operation");
            var which_operation = null;
            for(var i =0; i<operation_pointers.length; i++){
                if(operation_pointers[i].checked){
                    which_operation = operation_pointers[i].value;
                    break;
                }
            }
            return which_operation;


        }
        //handle change to answer after operation selection is changed
        function calcAnsAfterOpChange(){
            let which_operation = determineOperation();
            let val1 = parseInt(document.getElementById("var1input").value);
            let val2 = parseInt(document.getElementById("var2input").value);
            let ans = null;
            if(isNaN(val1) || isNaN(val2)){
                document.getElementById("result").textContent = "check input";
                return;
            }
            else{
                if(which_operation == "add"){
                    ans = add(val1,val2);
                }
                if(which_operation == "subtract"){
                    ans = subtract(val1,val2);
                }
                if(which_operation == "multiply"){
                    ans = multiply(val1,val2);
                }
                if(which_operation == "divide"){
                    ans = divide(val1,val2);
                }
                document.getElementById("result").textContent = ans;
        }
        }

        //handle change to new answer after field is changed
        function calcAnsAfterFieldChange(){
            let val1 = parseInt(document.getElementById("var1input").value);
            let val2 = parseInt(document.getElementById("var2input").value);
            let which_operation = determineOperation();
            let ans = null;

            if(which_operation == null){
                return;
            }
            else if(isNaN(val1) || isNaN(val2)){
                document.getElementById("result").textContent = "Output will appear here after both fields are inputed";
                return;
            }
            else{
                if(which_operation == "add"){
                    ans = add(val1,val2);
                }
                if(which_operation == "subtract"){
                    ans = subtract(val1,val2);
                }
                if(which_operation == "multiply"){
                    ans = multiply(val1,val2);
                }
                if(which_operation == "divide"){
                    ans = divide(val1,val2);
                }
                document.getElementById("result").textContent = "Result: "+ans;
            }
        }

        //main event listeners
        document.addEventListener("DOMContentLoaded", function(){
            var operations = document.getElementsByName("operation");
            let which_operation = determineOperation();

            for (var i=0; i<operations.length;i++){
                operations[i].addEventListener('click',calcAnsAfterOpChange);
            }
           
           document.getElementsByName("varfield")[0].addEventListener("change",calcAnsAfterFieldChange);
           document.getElementsByName("varfield")[1].addEventListener("change",calcAnsAfterFieldChange);
           


        }, false);


        
        
    </script>
  </body>
</html>